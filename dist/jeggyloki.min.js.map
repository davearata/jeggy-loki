{"version":3,"sources":["/source/jeggyloki.js"],"names":["global","factory","exports","module","require","define","amd","jeggyloki","jeggy","_","Loki","this","buildLokiQuery","query","arrayKeys","reduce","result","value","key","contains","isArray","$containsAny","$contains","keys","length","queryArray","map","queryKey","$and","buildLokiIdQuery","idKey","id","applyProjection","doc","projection","projectionArr","split","includes","assign","each","projectionKey","trim","omit","LokiCollection","_jeggy$Collection","name","nativeLokiCollection","_get","Object","getPrototypeOf","prototype","call","Error","_Promise","resolve","reject","isUndefined","find","clone","isString","error","then","findOne","createdDoc","insert","docs","createdDocs","removeWhere","foundDoc","isEmpty","remove","update","err","ids","$in","chain","obj","isObject","$set","$addToSet","forEach","push","ok","nModified","n","Collection","populateDoc","fieldKey","collection","isNull","array","populatedArray","promises","itemId","findById","all","LokiAdapter","_jeggy$Adapter","loki","collections","undefined","lokiCollection","getCollection","addCollection","constraints","unique","ensureUniqueIndex","collectionName","_this","Adapter"],"mappings":"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","file":"jeggyloki.min.js","sourceRoot":"/Users/darata/projects/apprise/jeggy-loki"}
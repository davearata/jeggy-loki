{"version":3,"sources":["/source/jeggyloki.js"],"names":["global","factory","exports","module","require","define","amd","jeggyloki","jeggy","_","Loki","this","buildLokiQuery","query","arrayKeys","reduce","result","value","key","contains","isArray","$containsAny","$contains","keys","length","queryArray","map","queryKey","$and","buildLokiIdQuery","idKey","id","applyProjection","doc","projection","projectionArr","split","includes","assign","each","projectionKey","trim","omit","LokiCollection","_jeggy$Collection","name","nativeLokiCollection","_get","Object","getPrototypeOf","prototype","call","Error","arrayKey","_Promise","resolve","push","update","reject","isUndefined","find","isString","clone","error","then","findOne","createdDoc","insert","docs","createdDocs","removeWhere","foundDoc","isEmpty","remove","err","ids","$in","chain","obj","isObject","$set","$addToSet","forEach","ok","nModified","n","_incrementField","incrementValue","isNull","Collection","populateDoc","fieldKey","collection","array","populatedArray","promises","itemId","findById","all","LokiAdapter","_jeggy$Adapter","loki","collections","undefined","lokiCollection","getCollection","addCollection","constraints","unique","ensureUniqueIndex","collectionName","_this","Adapter"],"mappings":"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","file":"jeggyloki.min.js","sourceRoot":"/Users/frossi/projects/apprise/jeggy-loki"}
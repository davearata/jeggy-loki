{"version":3,"sources":["/source/jeggyloki.js"],"names":["global","factory","exports","module","require","define","amd","jeggyloki","jeggy","_","Loki","this","buildLokiQuery","query","arrayKeys","reduce","result","value","key","contains","isArray","$containsAny","$contains","keys","length","queryArray","map","queryKey","$and","buildLokiIdQuery","idKey","id","applyProjection","doc","projection","projectionArr","split","includes","assign","each","projectionKey","trim","omit","LokiCollection","_jeggy$Collection","name","nativeLokiCollection","_get","Object","getPrototypeOf","prototype","call","Error","arrayKey","compareValue","isObject","JSON","stringify","foundValue","find","d","isUndefined","push","update","_Promise","resolve","pullQuery","filter","item","toString","reject","isString","clone","error","then","findOne","createdDoc","insert","docs","createdDocs","removeWhere","foundDoc","isEmpty","remove","err","ids","$in","chain","obj","$set","$addToSet","forEach","ok","nModified","n","_incrementField","incrementValue","isNull","Collection","populateDoc","fieldKey","collection","array","populatedArray","promises","itemId","findById","all","LokiAdapter","_jeggy$Adapter","loki","collections","undefined","lokiCollection","getCollection","addCollection","constraints","unique","ensureUniqueIndex","collectionName","_this","Adapter"],"mappings":"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","file":"jeggyloki.min.js","sourceRoot":"/Users/frossi/projects/apprise/jeggy-loki"}
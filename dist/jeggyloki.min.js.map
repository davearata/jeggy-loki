{"version":3,"sources":["/source/jeggyloki.js"],"names":["global","factory","exports","module","require","define","amd","jeggyloki","jeggy","_","Loki","this","buildLokiQuery","query","arrayKeys","reduce","result","value","key","contains","isArray","$containsAny","$contains","keys","length","queryArray","map","queryKey","$and","buildLokiIdQuery","idKey","id","applyProjection","doc","projection","projectionArr","split","includes","assign","each","projectionKey","trim","omit","LokiCollection","_jeggy$Collection","name","nativeLokiCollection","_get","Object","getPrototypeOf","prototype","call","Error","arrayKey","foundValue","find","d","isEqual","isUndefined","push","update","_Promise","resolve","pullQuery","filter","item","toString","reject","isString","clone","error","then","findOne","createdDoc","insert","docs","createdDocs","removeWhere","foundDoc","isEmpty","remove","err","ids","$in","chain","obj","isObject","$set","$addToSet","forEach","ok","nModified","n","_incrementField","incrementValue","isNull","Collection","populateDoc","fieldKey","collection","array","populatedArray","promises","itemId","findById","all","LokiAdapter","_jeggy$Adapter","loki","collections","undefined","lokiCollection","getCollection","addCollection","constraints","unique","ensureUniqueIndex","collectionName","_this","Adapter"],"mappings":"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","file":"jeggyloki.min.js","sourceRoot":"/Users/frossi/projects/apprise/jeggy-loki"}
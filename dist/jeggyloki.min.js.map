{"version":3,"sources":["/source/jeggyloki.js"],"names":["global","factory","exports","module","require","define","amd","jeggyloki","jeggy","_","Loki","this","buildLokiQuery","query","arrayKeys","reduce","result","value","key","contains","isArray","$containsAny","$contains","keys","length","queryArray","map","queryKey","$and","buildLokiIdQuery","idKey","id","applyProjection","doc","projection","projectionArr","split","includes","assign","each","projectionKey","trim","omit","LokiCollection","_jeggy$Collection","name","nativeLokiCollection","_get","Object","getPrototypeOf","prototype","call","Error","arrayKey","_Promise","resolve","push","update","pullQuery","filter","item","toString","reject","isUndefined","find","isString","clone","error","then","findOne","createdDoc","insert","docs","createdDocs","removeWhere","foundDoc","isEmpty","remove","err","ids","$in","chain","obj","isObject","$set","$addToSet","forEach","ok","nModified","n","_incrementField","incrementValue","isNull","Collection","populateDoc","fieldKey","collection","array","populatedArray","promises","itemId","findById","all","LokiAdapter","_jeggy$Adapter","loki","collections","undefined","lokiCollection","getCollection","addCollection","constraints","unique","ensureUniqueIndex","collectionName","_this","Adapter"],"mappings":"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","file":"jeggyloki.min.js","sourceRoot":"/Users/frossi/projects/apprise/jeggy-loki"}
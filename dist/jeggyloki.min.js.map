{"version":3,"sources":["/source/jeggyloki.js"],"names":["global","factory","exports","module","require","define","amd","jeggyloki","jeggy","_","Loki","this","buildLokiQuery","query","arrayKeys","reduce","result","value","key","contains","isArray","$containsAny","$contains","keys","length","queryArray","map","queryKey","$and","buildLokiIdQuery","idKey","id","applyProjection","doc","projection","projectionArr","split","includes","assign","each","projectionKey","trim","omit","LokiCollection","_jeggy$Collection","name","nativeLokiCollection","_get","Object","getPrototypeOf","prototype","call","Error","_Promise","resolve","reject","isUndefined","find","clone","isString","error","then","findOne","createdDoc","insert","docs","createdDocs","removeWhere","foundDoc","isEmpty","remove","update","err","ids","$in","chain","obj","isObject","$set","$addToSet","forEach","push","ok","nModified","n","_incrementField","incrementValue","isNull","Collection","populateDoc","fieldKey","collection","array","populatedArray","promises","itemId","findById","all","LokiAdapter","_jeggy$Adapter","loki","collections","undefined","lokiCollection","getCollection","addCollection","constraints","unique","ensureUniqueIndex","collectionName","_this","Adapter"],"mappings":"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","file":"jeggyloki.min.js","sourceRoot":"/Users/frankrossi/projects/jeggy-loki"}